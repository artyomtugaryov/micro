upstream api {
    server $API_SERVICE_ADDR:5000;
}

upstream sockets {
    server $SOCKET_SERVICE_ADDR:5001;
}

server {
    server_tokens off;

    listen 80;

    charset UTF-8;

    client_max_body_size 3000M;

    server_name default;

    location /socket.io {
        include /etc/nginx/proxy_params_ws;
        proxy_pass http://sockets/socket.io;
    }

    location /api {
        proxy_pass http://api;
    }

    location / {
      gzip off;
      root /client;
      index index.html;
    }
}
